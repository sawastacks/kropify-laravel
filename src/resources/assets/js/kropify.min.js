$(document).ready(function(){function o(t){var i=t.offset().top,t=t.offset().left;return{top:i-$(window).scrollTop(),left:t-$(window).scrollLeft()}}$("body").append('<div class="iEdit-img-edit"><canvas class="iEdit-img-edit-can"></canvas><canvas class="iEdit-img-edit-process-can"></canvas><div class="iEdit-img-edit-select"><div class="iEdit-img-edit-select-resize"></div></div><div class="iEdit-img-edit-act iEdit-img-edit-save"> Done </div><div class="iEdit-img-edit-act iEdit-img-edit-cancel"> Cancel </div></div>'),window.iEdit={can:$(".iEdit-img-edit-can")[0],processCan:$(".iEdit-img-edit-process-can")[0],selectionBox:$(".iEdit-img-edit-select"),container:$(".iEdit-img-edit"),saveBtn:$(".iEdit-img-edit-save"),cancelBtn:$(".iEdit-img-edit-cancel"),drag:!1,resize:!1,square:!0,status:!1,grcx:null,grcy:null,callback:null,imageType:null,imageQuality:1,open:function(t,i,e,a,n){if(t.constructor!==File||!t.type.match("image.*"))return!1;this.drag=!1,this.resize=!1,this.square=!0===i,this.imageQuality=0<Number(n)&&Number(n)<=1?Number(n):1,this.imageType="jpeg"==a||"png"==a||"gif"==a||"bmp"==a?a:"jpeg",this.grcx=!1,this.grcy=!1;this.callback=!(!e||"[object Function]"!=={}.toString.call(e))&&e,this.status=!0;var o=this.can.getContext("2d"),s=(iEdit.container.css("display","block").stop().animate({opacity:"1"}),new Image),r=this;return $(s).on("load",function(){s.width>s.height?(r.can.width=s.width,r.can.height=s.height,r.can.style.width=$(window).width()/2*1+"px",r.can.style.height=s.height*($(window).width()/2*1/s.width)+"px",o.fillStyle="#fff",o.fillRect(0,0,r.can.width,r.can.height),o.drawImage(s,0,0,r.can.width,r.can.height),iEdit.selectionBox.height($(r.can).height()-20),iEdit.selectionBox.width($(r.can).height()-20),iEdit.selectionBox.css({left:$(window).width()/2-$(r.can).height()/2+10+"px",top:$(window).height()/2-$(r.can).height()/2-15+"px"})):(s.width<s.height?(r.can.width=s.width,r.can.height=s.height,r.can.style.width=s.width*($(window).height()/3*2/s.height)+"px",r.can.style.height=$(window).height()/3*2+"px"):(r.can.width=s.width,r.can.height=s.height,r.can.style.width=$(window).height()/4.8*3.3+"px",r.can.style.height=$(window).height()/4.8*3.3+"px"),o.fillStyle="#fff",o.fillRect(0,0,r.can.width,r.can.height),o.drawImage(s,0,0,r.can.width,r.can.height),iEdit.selectionBox.height($(r.can).width()-20),iEdit.selectionBox.width($(r.can).width()-20),iEdit.selectionBox.css({left:$(window).width()/2-$(r.can).width()/2+10+"px",top:$(window).height()/2-$(r.can).width()/2-15+"px"}))}),s.src=URL.createObjectURL(t),!0},close:function(){this.drag=!1,this.resize=!1,this.square=!0,this.status=!1,this.grcx=void 0,this.grcy=void 0,this.callback=void 0,this.can.height=0,this.can.width=0,this.processCan.height=0,this.processCan.width=0;var t=this.processCan.getContext("2d");this.can.getContext("2d").clearRect(0,0,0,0),t.clearRect(0,0,0,0),iEdit.selectionBox.css({height:"0px",width:"0px"}),iEdit.container.stop().animate({opacity:"0"},300),setTimeout(function(){iEdit.container.css({display:"none"})},300)}},$(document).on("mouseup",function(){iEdit.drag=!1,iEdit.resize=!1,iEdit.grcx=!1,iEdit.grcy=!1}),iEdit.selectionBox.on("mousedown",function(t){var i=$(this),e=t.clientX-o(i).left,t=t.clientY-o(i).top;iEdit.grcx=!1,iEdit.grcy=!1,iEdit.selectionBox.width()-e<=28&&iEdit.selectionBox.height()-t<=28?(iEdit.drag=!1,iEdit.resize=!0):(iEdit.drag=!0,iEdit.resize=!1)}),$(document).on("mousemove",function(t){var i,e,a=t.clientX-o(iEdit.selectionBox).left,n=t.clientY-o(iEdit.selectionBox).top;!0===iEdit.drag&&iEdit.status?(!1===iEdit.grcx&&(iEdit.grcx=a),!1===iEdit.grcy&&(iEdit.grcy=n),i=t.clientX-iEdit.grcx,e=t.clientY-iEdit.grcy,i+iEdit.selectionBox.width()>=$(iEdit.can).width()+o($(iEdit.can)).left||i<=o($(iEdit.can)).left?i<=o($(iEdit.can)).left?iEdit.selectionBox.css({left:o($(iEdit.can)).left+"px"}):iEdit.selectionBox.css({left:o($(iEdit.can)).left+$(iEdit.can).width()-iEdit.selectionBox.width()+"px"}):iEdit.selectionBox.css({left:i+"px"}),e+iEdit.selectionBox.height()>=$(iEdit.can).height()+o($(iEdit.can)).top||e<=o($(iEdit.can)).top?e<=o($(iEdit.can)).top?iEdit.selectionBox.css({top:o($(iEdit.can)).top+"px"}):iEdit.selectionBox.css({top:o($(iEdit.can)).top+$(iEdit.can).height()-iEdit.selectionBox.height()+"px"}):iEdit.selectionBox.css({top:e+"px"})):!0===iEdit.resize&&iEdit.status&&(i=a,e=n,iEdit.square?(e<=i?(e=i)<100&&(e=i=100):(i=e)<100&&(e=i=100),i+o(iEdit.selectionBox).left>=$(iEdit.can).width()+o($(iEdit.can)).left?(i=o($(iEdit.can)).left+$(iEdit.can).width()-o(iEdit.selectionBox).left,e=i=o(iEdit.selectionBox).top+i>$(iEdit.can).height()+o($(iEdit.can)).top?o($(iEdit.can)).top+$(iEdit.can).height()-o(iEdit.selectionBox).top:i):e+o(iEdit.selectionBox).top>=$(iEdit.can).height()+o($(iEdit.can)).top&&(e=o($(iEdit.can)).top+$(iEdit.can).height()-o(iEdit.selectionBox).top,i=e=o(iEdit.selectionBox).left+e>$(iEdit.can).width()+o($(iEdit.can)).left?o($(iEdit.can)).left+$(iEdit.can).width()-o(iEdit.selectionBox).left:e)):(i<=100&&(i=100),e<=100&&(e=100),t.clientX>=$(iEdit.can).width()+o($(iEdit.can)).left&&(i=o($(iEdit.can)).left+$(iEdit.can).width()-o(iEdit.selectionBox).left),t.clientY>=$(iEdit.can).height()+o($(iEdit.can)).top&&(e=o($(iEdit.can)).top+$(iEdit.can).height()-o(iEdit.selectionBox).top)),iEdit.selectionBox.css({width:i+"px",height:e+"px"}))}),iEdit.saveBtn.on("click",function(){var t,i,e,a;iEdit.callback&&(a=iEdit.can.width/$(iEdit.can).width(),t=iEdit.selectionBox.height()*a,i=iEdit.selectionBox.width()*a,e=(o(iEdit.selectionBox).left-o($(iEdit.can)).left)*a,a=(o(iEdit.selectionBox).top-o($(iEdit.can)).top)*a,iEdit.processCan.height=t,iEdit.processCan.width=i,iEdit.processCan.getContext("2d").drawImage(iEdit.can,e,a,i,t,0,0,i,t),iEdit.callback(iEdit.processCan.toDataURL("image/"+iEdit.imageType,iEdit.imageQuality))),iEdit.close()}),iEdit.cancelBtn.on("click",function(){iEdit.close()}),$(window).on("resize",function(){iEdit.status&&iEdit.selectionBox.css({left:$(window).width()/2-$(iEdit.can).height()/2+10+"px",top:$(window).height()/2-$(iEdit.can).height()/2+10+"px"})})}),function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).Cropper=i()}(this,function(){"use strict";function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function I(i,t){var e,a=Object.keys(i);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(i),t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),a.push.apply(a,e)),a}function Y(a){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){var i=a,e=n[t=t];t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}function X(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t="undefined"!=typeof window&&void 0!==window.document,s=t?window:{},i=t&&"ontouchstart"in s.document.documentElement,e=t&&"PointerEvent"in s,d="cropper",S="all",A="crop",U="move",P="zoom",B="e",M="w",D="s",T="n",j="ne",$="nw",O="se",L="sw",q="".concat(d,"-crop"),F="".concat(d,"-disabled"),z="".concat(d,"-hidden"),Q="".concat(d,"-hide"),K="".concat(d,"-invisible"),n="".concat(d,"-modal"),G="".concat(d,"-move"),h="".concat(d,"Action"),u="".concat(d,"Preview"),Z="crop",J="crop",V="cropend",_="cropmove",tt="cropstart",it="dblclick",et=e?"pointerdown":i?"touchstart":"mousedown",at=e?"pointermove":i?"touchmove":"mousemove",nt=e?"pointerup pointercancel":i?"touchend touchcancel":"mouseup",ot="zoom",st="image/jpeg",rt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ct=/^data:/,dt=/^data:image\/jpeg;base64,/,ht=/^img|canvas$/i,lt={viewMode:0,dragMode:Z,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},pt=Number.isNaN||s.isNaN;function p(t){return"number"==typeof t&&!pt(t)}function ut(t){return 0<t&&t<1/0}function ft(t){return void 0===t}function o(t){return"object"===E(t)&&null!==t}var mt=Object.prototype.hasOwnProperty;function f(t){if(!o(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&mt.call(e,"isPrototypeOf")}catch(t){return!1}}function l(t){return"function"==typeof t}var vt=Array.prototype.slice;function gt(t){return Array.from?Array.from(t):vt.call(t)}function R(e,a){return e&&l(a)&&(Array.isArray(e)||p(e.length)?gt(e).forEach(function(t,i){a.call(e,t,i,e)}):o(e)&&Object.keys(e).forEach(function(t){a.call(e,e[t],t,e)})),e}var m=Object.assign||function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return o(e)&&0<i.length&&i.forEach(function(i){o(i)&&Object.keys(i).forEach(function(t){e[t]=i[t]})}),e},wt=/\.\d*(?:0|9){12}\d*$/;function N(t,i){i=1<arguments.length&&void 0!==i?i:1e11;return wt.test(t)?Math.round(t*i)/i:t}var yt=/^width|height|left|top|marginLeft|marginTop$/;function v(t,i){var e=t.style;R(i,function(t,i){yt.test(i)&&p(t)&&(t="".concat(t,"px")),e[i]=t})}function g(t,i){var e;i&&(p(t.length)?R(t,function(t){g(t,i)}):t.classList?t.classList.add(i):(e=t.className.trim())?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i)}function H(t,i){i&&(p(t.length)?R(t,function(t){H(t,i)}):t.classList?t.classList.remove(i):0<=t.className.indexOf(i)&&(t.className=t.className.replace(i,"")))}function r(t,i,e){i&&(p(t.length)?R(t,function(t){r(t,i,e)}):(e?g:H)(t,i))}var bt=/([a-z\d])([A-Z])/g;function xt(t){return t.replace(bt,"$1-$2").toLowerCase()}function kt(t,i){return o(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(xt(i)))}function w(t,i,e){o(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(xt(i)),e)}var Et,Ct,Bt=/\s\s*/,Mt=(Ct=!1,t&&(Et=!1,e=function(){},i=Object.defineProperty({},"once",{get:function(){return Ct=!0,Et},set:function(t){Et=t}}),s.addEventListener("test",e,i),s.removeEventListener("test",e,i)),Ct);function a(e,t,a,i){var n=3<arguments.length&&void 0!==i?i:{},o=a;t.trim().split(Bt).forEach(function(t){var i;Mt||(i=e.listeners)&&i[t]&&i[t][a]&&(o=i[t][a],delete i[t][a],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length)&&delete e.listeners,e.removeEventListener(t,o,n)})}function y(o,t,s,i){var r=3<arguments.length&&void 0!==i?i:{},c=s;t.trim().split(Bt).forEach(function(a){var t,n;r.once&&!Mt&&(t=o.listeners,c=function(){delete n[a][s],o.removeEventListener(a,c,r);for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s.apply(o,i)},(n=void 0===t?{}:t)[a]||(n[a]={}),n[a][s]&&o.removeEventListener(a,n[a][s],r),n[a][s]=c,o.listeners=n),o.addEventListener(a,c,r)})}function b(t,i,e){var a;return l(Event)&&l(CustomEvent)?a=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(a)}function Dt(t){t=t.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Tt=s.location,jt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function $t(t){t=t.match(jt);return null!==t&&(t[1]!==Tt.protocol||t[2]!==Tt.hostname||t[3]!==Tt.port)}function Ot(t){var i="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+i}function x(t){var i=t.rotate,e=t.scaleX,a=t.scaleY,n=t.translateX,t=t.translateY,o=[],n=(p(n)&&0!==n&&o.push("translateX(".concat(n,"px)")),p(t)&&0!==t&&o.push("translateY(".concat(t,"px)")),p(i)&&0!==i&&o.push("rotate(".concat(i,"deg)")),p(e)&&1!==e&&o.push("scaleX(".concat(e,")")),p(a)&&1!==a&&o.push("scaleY(".concat(a,")")),o.length?o.join(" "):"none");return{WebkitTransform:n,msTransform:n,transform:n}}function c(t,i){var e=t.pageX,t=t.pageY,a={endX:e,endY:t};return i?a:Y({startX:e,startY:t},a)}function W(t,i){var e,a=t.aspectRatio,n=t.height,t=t.width,i=1<arguments.length&&void 0!==i?i:"contain",o=ut(t),s=ut(n);return o&&s?(e=n*a,"contain"===i&&t<e||"cover"===i&&e<t?n=t/a:t=n*a):o?n=t/a:s&&(t=n*a),{width:t,height:n}}var Lt=String.fromCharCode,zt=/^data:.*,/;var Rt,t={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,a=this.cropper,e=(g(a,z),H(t,z),{width:Math.max(e.offsetWidth,Number(i.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(i.minContainerHeight)||100)});v(a,{width:(this.containerData=e).width,height:e.height}),g(t,z),H(a,z)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,a=Math.abs(i.rotate)%180==90,n=a?i.naturalHeight:i.naturalWidth,a=a?i.naturalWidth:i.naturalHeight,o=n/a,s=t.width,r=t.height,o=(t.height*o>t.width?3===e?s=t.height*o:r=t.width/o:3===e?r=t.width/o:s=t.height*o,{aspectRatio:o,naturalWidth:n,naturalHeight:a,width:s,height:r});o.left=(t.width-s)/2,o.top=(t.height-r)/2,o.oldLeft=o.left,o.oldTop=o.top,this.canvasData=o,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=m({},i),this.initialCanvasData=m({},o)},limitCanvas:function(t,i){var e=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,s=e.viewMode,r=n.aspectRatio,c=this.cropped&&o;t&&(t=Number(e.minCanvasWidth)||0,e=Number(e.minCanvasHeight)||0,1<s?(t=Math.max(t,a.width),e=Math.max(e,a.height),3===s&&(t<e*r?t=e*r:e=t/r)):0<s&&(t?t=Math.max(t,c?o.width:0):e?e=Math.max(e,c?o.height:0):c&&((t=o.width)<(e=o.height)*r?t=e*r:e=t/r)),t=(r=W({aspectRatio:r,width:t,height:e})).width,e=r.height,n.minWidth=t,n.minHeight=e,n.maxWidth=1/0,n.maxHeight=1/0),i&&((c?0:1)<s?(r=a.width-n.width,t=a.height-n.height,n.minLeft=Math.min(0,r),n.minTop=Math.min(0,t),n.maxLeft=Math.max(0,r),n.maxTop=Math.max(0,t),c&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===s)&&(n.width>=a.width&&(n.minLeft=Math.min(0,r),n.maxLeft=Math.max(0,r)),n.height>=a.height)&&(n.minTop=Math.min(0,t),n.maxTop=Math.max(0,t))):(n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height))},renderCanvas:function(t,i){var e,a,n,o,s=this.canvasData,r=this.imageData;i&&(i={width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0},r=i.width,o=i.height,i=i.degree,e=90==(i=Math.abs(i)%180)?{width:o,height:r}:(a=i%90*Math.PI/180,e=Math.sin(a),n=r*(a=Math.cos(a))+o*e,r=r*e+o*a,90<i?{width:r,height:n}:{width:n,height:r}),a=s.width*((o=e.width)/s.naturalWidth),n=s.height*((i=e.height)/s.naturalHeight),s.left-=(a-s.width)/2,s.top-=(n-s.height)/2,s.width=a,s.height=n,s.aspectRatio=o/i,s.naturalWidth=o,s.naturalHeight=i,this.limitCanvas(!0,!1)),(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,v(this.canvas,m({width:s.width,height:s.height},x({translateX:s.left,translateY:s.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,a=e.naturalWidth*(i.width/i.naturalWidth),n=e.naturalHeight*(i.height/i.naturalHeight);m(e,{width:a,height:n,left:(i.width-a)/2,top:(i.height-n)/2}),v(this.image,m({width:e.width,height:e.height},x(m({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,t=Number(t.autoCropArea)||.8,a={width:i.width,height:i.height};e&&(i.height*e>i.width?a.height=a.width/e:a.width=a.height*e),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*t),a.height=Math.max(a.minHeight,a.height*t),a.left=i.left+(i.width-a.width)/2,a.top=i.top+(i.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=m({},a)},limitCropBox:function(t,i){var e,a,n=this.options,o=this.containerData,s=this.canvasData,r=this.cropBoxData,c=this.limited,d=n.aspectRatio;t&&(t=Number(n.minCropBoxWidth)||0,n=Number(n.minCropBoxHeight)||0,e=c?Math.min(o.width,s.width,s.width+s.left,o.width-s.left):o.width,a=c?Math.min(o.height,s.height,s.height+s.top,o.height-s.top):o.height,t=Math.min(t,o.width),n=Math.min(n,o.height),d&&(t&&n?t<n*d?n=t/d:t=n*d:t?n=t/d:n&&(t=n*d),e<a*d?a=e/d:e=a*d),r.minWidth=Math.min(t,e),r.minHeight=Math.min(n,a),r.maxWidth=e,r.maxHeight=a),i&&(c?(r.minLeft=Math.max(0,s.left),r.minTop=Math.max(0,s.top),r.maxLeft=Math.min(o.width,s.left+s.width)-r.width,r.maxTop=Math.min(o.height,s.top+s.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=o.width-r.width,r.maxTop=o.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&w(this.face,h,e.width>=i.width&&e.height>=i.height?U:S),v(this.cropBox,m({width:e.width,height:e.height},x({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),b(this.element,J,this.getData())}},e={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");e&&(o.crossOrigin=e),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i&&("string"==typeof(o=i)?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),R(this.previews=o,function(t){var i=document.createElement("img");w(t,u,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))},resetPreview:function(){R(this.previews,function(i){var e=kt(i,u),e=(v(i,{width:e.width,height:e.height}),i.innerHTML=e.html,i),i=u;if(o(e[i]))try{delete e[i]}catch(t){e[i]=void 0}else if(e.dataset)try{delete e.dataset[i]}catch(t){e.dataset[i]=void 0}else e.removeAttribute("data-".concat(xt(i)))})},preview:function(){var s=this.imageData,t=this.canvasData,i=this.cropBoxData,r=i.width,c=i.height,d=s.width,h=s.height,l=i.left-t.left-s.left,p=i.top-t.top-s.top;this.cropped&&!this.disabled&&(v(this.viewBoxImage,m({width:d,height:h},x(m({translateX:-l,translateY:-p},s)))),R(this.previews,function(t){var i=kt(t,u),e=i.width,i=i.height,a=e,n=i,o=1;r&&(n=c*(o=e/r)),c&&i<n&&(a=r*(o=i/c),n=i),v(t,{width:a,height:n}),v(t.getElementsByTagName("img")[0],m({width:d*o,height:h*o},x(m({translateX:-l*o,translateY:-p*o},s))))}))}},i={bind:function(){var t=this.element,i=this.options,e=this.cropper;l(i.cropstart)&&y(t,tt,i.cropstart),l(i.cropmove)&&y(t,_,i.cropmove),l(i.cropend)&&y(t,V,i.cropend),l(i.crop)&&y(t,J,i.crop),l(i.zoom)&&y(t,ot,i.zoom),y(e,et,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&y(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&y(e,it,this.onDblclick=this.dblclick.bind(this)),y(t.ownerDocument,at,this.onCropMove=this.cropMove.bind(this)),y(t.ownerDocument,nt,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&y(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;l(i.cropstart)&&a(t,tt,i.cropstart),l(i.cropmove)&&a(t,_,i.cropmove),l(i.cropend)&&a(t,V,i.cropend),l(i.crop)&&a(t,J,i.crop),l(i.zoom)&&a(t,ot,i.zoom),a(e,et,this.onCropStart),i.zoomable&&i.zoomOnWheel&&a(e,"wheel",this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&a(e,it,this.onDblclick),a(t.ownerDocument,at,this.onCropMove),a(t.ownerDocument,nt,this.onCropEnd),i.responsive&&a(window,"resize",this.onResize)}},Nt={resize:function(){var e,a,n,t=this.options,i=this.container,o=this.containerData,s=Number(t.minContainerWidth)||200,r=Number(t.minContainerHeight)||100;this.disabled||o.width<=s||o.height<=r||1==(n=i.offsetWidth/o.width)&&i.offsetHeight===o.height||(t.restore&&(e=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(R(e,function(t,i){e[i]=t*n})),this.setCropBoxData(R(a,function(t,i){a[i]=t*n}))))},dblclick:function(){var t,i;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,i=q,(t.classList?t.classList.contains(i):-1<t.className.indexOf(i))?"move":Z))},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?a=0<t.deltaY?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=0<t.detail?1:-1),this.zoom(-a*e,t))},cropStart:function(t){var i,e=t.buttons,a=t.button;this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(p(e)&&1!==e||p(a)&&0!==a||t.ctrlKey)||(e=this.options,i=this.pointers,t.changedTouches?R(t.changedTouches,function(t){i[t.identifier]=c(t)}):i[t.pointerId||0]=c(t),a=1<Object.keys(i).length&&e.zoomable&&e.zoomOnTouch?P:kt(t.target,h),rt.test(a)&&!1!==b(this.element,tt,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===A)&&(this.cropping=!0,g(this.dragBox,n)))},cropMove:function(t){var i,e=this.action;!this.disabled&&e&&(i=this.pointers,t.preventDefault(),!1!==b(this.element,_,{originalEvent:t,action:e}))&&(t.changedTouches?R(t.changedTouches,function(t){m(i[t.identifier]||{},c(t,!0))}):m(i[t.pointerId||0]||{},c(t,!0)),this.change(t))},cropEnd:function(t){var i,e;this.disabled||(i=this.action,e=this.pointers,t.changedTouches?R(t.changedTouches,function(t){delete e[t.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,r(this.dragBox,n,this.cropped&&this.options.modal)),b(this.element,V,{originalEvent:t,action:i})))}},Ht={change:function(t){var i=this.options,e=this.canvasData,a=this.containerData,n=this.cropBoxData,o=this.pointers,s=this.action,r=i.aspectRatio,c=n.left,d=n.top,h=n.width,l=n.height,p=c+h,u=d+l,f=0,m=0,v=a.width,g=a.height,w=!0;function y(t){switch(t){case B:p+C.x>v&&(C.x=v-p);break;case M:c+C.x<f&&(C.x=f-c);break;case T:d+C.y<m&&(C.y=m-d);break;case D:u+C.y>g&&(C.y=g-u)}}!r&&t.shiftKey&&(r=h&&l?h/l:1),this.limited&&(f=n.minLeft,m=n.minTop,v=f+Math.min(a.width,e.width,e.left+e.width),g=m+Math.min(a.height,e.height,e.top+e.height));var b,x,k,E=o[Object.keys(o)[0]],C={x:E.endX-E.startX,y:E.endY-E.startY};switch(s){case S:c+=C.x,d+=C.y;break;case B:0<=C.x&&(v<=p||r&&(d<=m||g<=u))?w=!1:(y(B),(h+=C.x)<0&&(s=M,c-=h=-h),r&&(d+=(n.height-(l=h/r))/2));break;case T:C.y<=0&&(d<=m||r&&(c<=f||v<=p))?w=!1:(y(T),l-=C.y,d+=C.y,l<0&&(s=D,d-=l=-l),r&&(c+=(n.width-(h=l*r))/2));break;case M:C.x<=0&&(c<=f||r&&(d<=m||g<=u))?w=!1:(y(M),h-=C.x,c+=C.x,h<0&&(s=B,c-=h=-h),r&&(d+=(n.height-(l=h/r))/2));break;case D:0<=C.y&&(g<=u||r&&(c<=f||v<=p))?w=!1:(y(D),(l+=C.y)<0&&(s=T,d-=l=-l),r&&(c+=(n.width-(h=l*r))/2));break;case j:if(r){if(C.y<=0&&(d<=m||v<=p)){w=!1;break}y(T),l-=C.y,d+=C.y,h=l*r}else y(T),y(B),!(0<=C.x)||p<v?h+=C.x:C.y<=0&&d<=m&&(w=!1),C.y<=0&&!(m<d)||(l-=C.y,d+=C.y);h<0&&l<0?(s=L,d-=l=-l,c-=h=-h):h<0?(s=$,c-=h=-h):l<0&&(s=O,d-=l=-l);break;case $:if(r){if(C.y<=0&&(d<=m||c<=f)){w=!1;break}y(T),l-=C.y,d+=C.y,c+=n.width-(h=l*r)}else y(T),y(M),!(C.x<=0)||f<c?(h-=C.x,c+=C.x):C.y<=0&&d<=m&&(w=!1),C.y<=0&&!(m<d)||(l-=C.y,d+=C.y);h<0&&l<0?(s=O,d-=l=-l,c-=h=-h):h<0?(s=j,c-=h=-h):l<0&&(s=L,d-=l=-l);break;case L:if(r){if(C.x<=0&&(c<=f||g<=u)){w=!1;break}y(M),h-=C.x,c+=C.x,l=h/r}else y(D),y(M),!(C.x<=0)||f<c?(h-=C.x,c+=C.x):0<=C.y&&g<=u&&(w=!1),0<=C.y&&!(u<g)||(l+=C.y);h<0&&l<0?(s=j,d-=l=-l,c-=h=-h):h<0?(s=O,c-=h=-h):l<0&&(s=$,d-=l=-l);break;case O:if(r){if(0<=C.x&&(v<=p||g<=u)){w=!1;break}y(B),l=(h+=C.x)/r}else y(D),y(B),!(0<=C.x)||p<v?h+=C.x:0<=C.y&&g<=u&&(w=!1),0<=C.y&&!(u<g)||(l+=C.y);h<0&&l<0?(s=$,d-=l=-l,c-=h=-h):h<0?(s=L,c-=h=-h):l<0&&(s=j,d-=l=-l);break;case U:this.move(C.x,C.y),w=!1;break;case P:this.zoom((x=Y({},b=o),k=[],R(b,function(n,t){delete x[t],R(x,function(t){var i=Math.abs(n.startX-t.startX),e=Math.abs(n.startY-t.startY),a=Math.abs(n.endX-t.endX),t=Math.abs(n.endY-t.endY),i=Math.sqrt(i*i+e*e),e=(Math.sqrt(a*a+t*t)-i)/i;k.push(e)})}),k.sort(function(t,i){return Math.abs(t)<Math.abs(i)}),k[0]),t),w=!1;break;case A:C.x&&C.y?(b=Dt(this.cropper),c=E.startX-b.left,d=E.startY-b.top,h=n.minWidth,l=n.minHeight,0<C.x?s=0<C.y?O:j:C.x<0&&(c-=h,s=0<C.y?L:$),C.y<0&&(d-=l),this.cropped||(H(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):w=!1}w&&(n.width=h,n.height=l,n.left=c,n.top=d,this.action=s,this.renderCropBox()),R(o,function(t){t.startX=t.endX,t.startY=t.endY})}},Wt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&g(this.dragBox,n),H(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=m({},this.initialImageData),this.canvasData=m({},this.initialCanvasData),this.cropBoxData=m({},this.initialCropBoxData),this.renderCanvas(),this.cropped)&&this.renderCropBox(),this},clear:function(){return this.cropped&&!this.disabled&&(m(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),H(this.dragBox,n),g(this.cropBox,z)),this},replace:function(i,t){t=1<arguments.length&&void 0!==t&&t;return!this.disabled&&i&&(this.isImg&&(this.element.src=i),t?(this.url=i,this.image.src=i,this.ready&&(this.viewBoxImage.src=i,R(this.previews,function(t){t.getElementsByTagName("img")[0].src=i}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(i))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,H(this.cropper,F)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,g(this.cropper,F)),this},destroy:function(){var t=this.element;return t[d]&&(t[d]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate()),this},move:function(t,i){var i=1<arguments.length&&void 0!==i?i:t,e=this.canvasData,a=e.left,e=e.top;return this.moveTo(ft(t)?t:a+Number(t),ft(i)?i:e+Number(i))},moveTo:function(t,i){var i=1<arguments.length&&void 0!==i?i:t,e=this.canvasData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(p(t)&&(e.left=t,a=!0),p(i)&&(e.top=i,a=!0),a)&&this.renderCanvas(!0),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var a,n,o,s=this.options,r=this.canvasData,c=r.width,d=r.height,h=r.naturalWidth,l=r.naturalHeight;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&s.zoomable){s=h*t,l=l*t;if(!1===b(this.element,ot,{ratio:t,oldRatio:c/h,originalEvent:e}))return this;e?(t=this.pointers,h=Dt(this.cropper),t=t&&Object.keys(t).length?(o=n=a=0,R(t,function(t){var i=t.startX,t=t.startY;a+=i,n+=t,o+=1}),{pageX:a/=o,pageY:n/=o}):{pageX:e.pageX,pageY:e.pageY},r.left-=(s-c)*((t.pageX-h.left-r.left)/c),r.top-=(l-d)*((t.pageY-h.top-r.top)/d)):f(i)&&p(i.x)&&p(i.y)?(r.left-=(s-c)*((i.x-r.left)/c),r.top-=(l-d)*((i.y-r.top)/d)):(r.left-=(s-c)/2,r.top-=(l-d)/2),r.width=s,r.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return p(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,p(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(p(i)?i:1,t)},scale:function(t,i){var i=1<arguments.length&&void 0!==i?i:t,e=this.imageData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(p(t)&&(e.scaleX=t,a=!0),p(i)&&(e.scaleY=i,a=!0),a)&&this.renderCanvas(!0,!0),this},getData:function(t){var e,a,t=0<arguments.length&&void 0!==t&&t,i=this.options,n=this.imageData,o=this.canvasData,s=this.cropBoxData;return this.ready&&this.cropped?(e={x:s.left-o.left,y:s.top-o.top,width:s.width,height:s.height},a=n.width/n.naturalWidth,R(e,function(t,i){e[i]=t/a}),t&&(o=Math.round(e.y+e.height),s=Math.round(e.x+e.width),e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=s-e.x,e.height=o-e.y)):e={x:0,y:0,width:0,height:0},i.rotatable&&(e.rotate=n.rotate||0),i.scalable&&(e.scaleX=n.scaleX||1,e.scaleY=n.scaleY||1),e},setData:function(t){var i,e=this.options,a=this.imageData,n=this.canvasData,o={};return this.ready&&!this.disabled&&f(t)&&(i=!1,e.rotatable&&p(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,i=!0),e.scalable&&(p(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,i=!0),p(t.scaleY))&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,i=!0),i&&this.renderCanvas(!0,!0),e=a.width/a.naturalWidth,p(t.x)&&(o.left=t.x*e+n.left),p(t.y)&&(o.top=t.y*e+n.top),p(t.width)&&(o.width=t.width*e),p(t.height)&&(o.height=t.height*e),this.setCropBoxData(o)),this},getContainerData:function(){return this.ready?m({},this.containerData):{}},getImageData:function(){return this.sized?m({},this.imageData):{}},getCanvasData:function(){var i=this.canvasData,e={};return this.ready&&R(["left","top","width","height","naturalWidth","naturalHeight"],function(t){e[t]=i[t]}),e},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&f(t)&&(p(t.left)&&(i.left=t.left),p(t.top)&&(i.top=t.top),p(t.width)?(i.width=t.width,i.height=t.width/e):p(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return(t=this.ready&&this.cropped?{left:i.left,top:i.top,width:i.width,height:i.height}:t)||{}},setCropBoxData:function(t){var i,e,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&f(t)&&(p(t.left)&&(a.left=t.left),p(t.top)&&(a.top=t.top),p(t.width)&&t.width!==a.width&&(i=!0,a.width=t.width),p(t.height)&&t.height!==a.height&&(e=!0,a.height=t.height),n&&(i?a.height=a.width/n:e&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(t){t=0<arguments.length&&void 0!==t?t:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=(w=this.image,m=this.imageData,B=m.aspectRatio,n=m.naturalWidth,r=m.naturalHeight,u=void 0===(u=m.rotate)?0:u,f=void 0===(f=m.scaleX)?1:f,m=void 0===(m=m.scaleY)?1:m,o=i.aspectRatio,l=i.naturalWidth,s=i.naturalHeight,h=void 0===(h=t.fillColor)?"transparent":h,v=void 0===(v=t.imageSmoothingEnabled)||v,g=void 0===(g=t.imageSmoothingQuality)?"low":g,c=void 0===(c=t.maxWidth)?1/0:c,d=void 0===(d=t.maxHeight)?1/0:d,e=void 0===(e=t.minWidth)?0:e,a=void 0===(a=t.minHeight)?0:a,D=document.createElement("canvas"),M=D.getContext("2d"),p=W({aspectRatio:o,width:c,height:d}),o=W({aspectRatio:o,width:e,height:a},"cover"),l=Math.min(p.width,Math.max(o.width,l)),p=Math.min(p.height,Math.max(o.height,s)),o=W({aspectRatio:B,width:c,height:d}),s=W({aspectRatio:B,width:e,height:a},"cover"),c=Math.min(o.width,Math.max(s.width,n)),d=Math.min(o.height,Math.max(s.height,r)),B=[-c/2,-d/2,c,d],D.width=N(l),D.height=N(p),M.fillStyle=h,M.fillRect(0,0,l,p),M.save(),M.translate(l/2,p/2),M.rotate(u*Math.PI/180),M.scale(f,m),M.imageSmoothingEnabled=v,M.imageSmoothingQuality=g,M.drawImage.apply(M,[w].concat(X(B.map(function(t){return Math.floor(N(t))})))),M.restore(),D);if(!this.cropped)return e;var a=this.getData(),n=a.x,o=a.y,s=a.width,r=a.height,c=e.width/Math.floor(i.naturalWidth),d=(1!=c&&(n*=c,o*=c,s*=c,r*=c),s/r),h=W({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),l=W({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=W({aspectRatio:d,width:t.width||(1!=c?e.width:s),height:t.height||(1!=c?e.height:r)}),u=p.width,f=p.height,u=Math.min(h.width,Math.max(l.width,u)),f=Math.min(h.height,Math.max(l.height,f)),m=document.createElement("canvas"),v=m.getContext("2d"),g=(m.width=N(u),m.height=N(f),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,u,f),t.imageSmoothingEnabled),w=t.imageSmoothingQuality;v.imageSmoothingEnabled=void 0===g||g,w&&(v.imageSmoothingQuality=w);var y,b,x,k,E,C,d,B=e.width,M=e.height,D=n,a=o,i=(D<=-s||B<D?E=x=y=D=0:D<=0?(x=-D,D=0,E=y=Math.min(B,s+D)):D<=B&&(x=0,E=y=Math.min(s,B-D)),y<=0||a<=-r||M<a?C=k=b=a=0:a<=0?(k=-a,a=0,C=b=Math.min(M,r+a)):a<=M&&(k=0,C=b=Math.min(r,M-a)),[D,a,y,b]);return 0<E&&0<C&&i.push(x*(d=u/s),k*d,E*d,C*d),v.drawImage.apply(v,[e].concat(X(i.map(function(t){return Math.floor(N(t))})))),m},setAspectRatio:function(t){var i=this.options;return this.disabled||ft(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped)&&this.renderCropBox()),this},setDragMode:function(t){var i,e,a=this.options,n=this.dragBox,o=this.face;return this.ready&&!this.disabled&&(e=a.movable&&"move"===t,a.dragMode=t=(i=t===Z)||e?t:"none",w(n,h,t),r(n,q,i),r(n,G,e),a.cropBoxMovable||(w(o,h,t),r(o,q,i),r(o,G,e))),this}},It=s.Cropper,k=(Rt=[{key:"noConflict",value:function(){return window.Cropper=It,Yt}},{key:"setDefaults",value:function(t){m(lt,f(t)&&t)}}],C((k=Yt).prototype,[{key:"init",value:function(){var t,i=this.element,e=i.tagName.toLowerCase();if(!i[d]){if(i[d]=this,"img"===e){if(this.isImg=!0,t=i.getAttribute("src")||"",!(this.originalUrl=t))return;t=i.src}else"canvas"===e&&window.HTMLCanvasElement&&(t=i.toDataURL());this.load(t)}}},{key:"load",value:function(t){var i,e,a,n,o,s,r=this;t&&(this.url=t,this.imageData={},i=this.element,(e=this.options).rotatable||e.scalable||(e.checkOrientation=!1),e.checkOrientation&&window.ArrayBuffer?ct.test(t)?dt.test(t)?this.read((n=t.replace(zt,""),o=atob(n),n=new ArrayBuffer(o.length),R(s=new Uint8Array(n),function(t,i){s[i]=o.charCodeAt(i)}),n)):this.clone():(a=new XMLHttpRequest,n=this.clone.bind(this),this.reloading=!0,(this.xhr=a).onabort=n,a.onerror=n,a.ontimeout=n,a.onprogress=function(){a.getResponseHeader("content-type")!==st&&a.abort()},a.onload=function(){r.read(a.response)},a.onloadend=function(){r.reloading=!1,r.xhr=null},e.checkCrossOrigin&&$t(t)&&i.crossOrigin&&(t=Ot(t)),a.open("GET",t),a.responseType="arraybuffer",a.withCredentials="use-credentials"===i.crossOrigin,a.send()):this.clone())}},{key:"read",value:function(e){var t,i=this.options,a=this.imageData,n=function(t){var i,e,a,n,o,s,r,c=new DataView(t);try{if(255===c.getUint8(0)&&216===c.getUint8(1))for(var d=c.byteLength,h=2;h+1<d;){if(255===c.getUint8(h)&&225===c.getUint8(h+1)){a=h;break}h+=1}if(a&&(o=a+10,"Exif"!==function(t,i,e){var a="";e+=i;for(var n=i;n<e;n+=1)a+=Lt(t.getUint8(n));return a}(c,a+4,4)||!(e=18761===(s=c.getUint16(o)))&&19789!==s||42!==c.getUint16(o+2,e)||8<=(r=c.getUint32(o+4,e))&&(n=o+r)),n)for(var l,p=c.getUint16(n,e),u=0;u<p;u+=1)if(l=n+12*u+2,274===c.getUint16(l,e)){l+=8,i=c.getUint16(l,e),c.setUint16(l,1,e);break}}catch(t){i=1}return i}(e),o=0,s=1,r=1;1<n&&(this.url=function(){for(var t=[],i=new Uint8Array(e);0<i.length;)t.push(Lt.apply(null,gt(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(t.join("")))}(),o=(t=function(){var t=0,i=1,e=1;switch(n){case 2:i=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:e}}()).rotate,s=t.scaleX,r=t.scaleY),i.rotatable&&(a.rotate=o),i.scalable&&(a.scaleX=s,a.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,i=this.url,e=t.crossOrigin,a=i,n=(this.options.checkCrossOrigin&&$t(i)&&(e=e||"anonymous",a=Ot(i)),this.crossOrigin=e,this.crossOriginUrl=a,document.createElement("img"));e&&(n.crossOrigin=e),n.src=a||i,n.alt=t.alt||"The image to crop",(this.image=n).onload=this.start.bind(this),n.onerror=this.stop.bind(this),g(n,Q),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;function i(t,i){m(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.sizing=!1,e.sized=!0,e.build()}t.onload=null,t.onerror=null,this.sizing=!0;var a,n,o=s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent);!t.naturalWidth||o?(a=document.createElement("img"),n=document.body||document.documentElement,(this.sizingImage=a).onload=function(){i(a.width,a.height),o||n.removeChild(a)},a.src=t.src,o||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(a))):i(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){var t,i,e,a,n,o,s,r,c;this.sized&&!this.ready&&(t=this.element,i=this.options,e=this.image,a=t.parentNode,(n=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',o=(n=n.querySelector(".".concat(d,"-container"))).querySelector(".".concat(d,"-canvas")),s=n.querySelector(".".concat(d,"-drag-box")),c=(r=n.querySelector(".".concat(d,"-crop-box"))).querySelector(".".concat(d,"-face")),this.container=a,this.cropper=n,this.canvas=o,this.dragBox=s,this.cropBox=r,this.viewBox=n.querySelector(".".concat(d,"-view-box")),this.face=c,o.appendChild(e),g(t,z),a.insertBefore(n,t.nextSibling),this.isImg||H(e,Q),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,g(r,z),i.guides||g(r.getElementsByClassName("".concat(d,"-dashed")),z),i.center||g(r.getElementsByClassName("".concat(d,"-center")),z),i.background&&g(n,"".concat(d,"-bg")),i.highlight||g(c,K),i.cropBoxMovable&&(g(c,G),w(c,h,S)),i.cropBoxResizable||(g(r.getElementsByClassName("".concat(d,"-line")),z),g(r.getElementsByClassName("".concat(d,"-point")),z)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),l(i.ready)&&y(t,"ready",i.ready,{once:!0}),b(t,"ready"))}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),H(this.element,z))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}]),C(k,Rt),Yt);function Yt(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=this;if(!(e instanceof Yt))throw new TypeError("Cannot call a class as a function");if(!t||!ht.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=m({},lt,f(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return m(k.prototype,t,e,i,Nt,Ht,Wt),k}),function(t){"undefined"==typeof HoldOn&&(t.HoldOn=function(){if("undefined"==typeof jQuery)throw new Error("HoldOn.js requires jQuery");var t={open:function(t){$("#holdon-overlay").remove();var i="sk-rect",e="",a="";switch(t&&(t.hasOwnProperty("theme")&&(i=t.theme),t.hasOwnProperty("message"))&&(a=t.message),i){case"custom":e='<div style="text-align: center;">'+t.content+"</div>";break;case"sk-dot":e='<div class="sk-dot"> <div class="sk-dot1"></div> <div class="sk-dot2"></div> </div>';break;case"sk-rect":e='<div class="sk-rect"> <div class="rect1"></div> <div class="rect2"></div> <div class="rect3"></div> <div class="rect4"></div> <div class="rect5"></div> </div>';break;case"sk-cube":e='<div class="sk-cube"> <div class="sk-cube1"></div> <div class="sk-cube2"></div> </div>';break;case"sk-bounce":e='<div class="sk-bounce"> <div class="bounce1"></div> <div class="bounce2"></div> <div class="bounce3"></div> </div>';break;case"sk-circle":e='<div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div>';break;case"sk-cube-grid":e='<div class="sk-cube-grid"> <div class="sk-cube-child sk-cube-grid1"></div> <div class="sk-cube-child sk-cube-grid2"></div> <div class="sk-cube-child sk-cube-grid3"></div> <div class="sk-cube-child sk-cube-grid4"></div> <div class="sk-cube-child sk-cube-grid5"></div> <div class="sk-cube-child sk-cube-grid6"></div> <div class="sk-cube-child sk-cube-grid7"></div> <div class="sk-cube-child sk-cube-grid8"></div> <div class="sk-cube-child sk-cube-grid9"></div> </div>';break;case"sk-folding-cube":e='<div class="sk-folding-cube"> <div class="sk-cubechild1 sk-cube-parent"></div> <div class="sk-cubechild2 sk-cube-parent"></div> <div class="sk-cubechild4 sk-cube-parent"></div> <div class="sk-cubechild3 sk-cube-parent"></div> </div>';break;case"sk-fading-circle":e='<div class="sk-fading-circle"> <div class="sk-fading-circle1 sk-circle-child"></div> <div class="sk-fading-circle2 sk-circle-child"></div> <div class="sk-fading-circle3 sk-circle-child"></div> <div class="sk-fading-circle4 sk-circle-child"></div> <div class="sk-fading-circle5 sk-circle-child"></div> <div class="sk-fading-circle6 sk-circle-child"></div> <div class="sk-fading-circle7 sk-circle-child"></div> <div class="sk-fading-circle8 sk-circle-child"></div> <div class="sk-fading-circle9 sk-circle-child"></div> <div class="sk-fading-circle10 sk-circle-child"></div> <div class="sk-fading-circle11 sk-circle-child"></div> <div class="sk-fading-circle12 sk-circle-child"></div> </div>';break;default:e='<div class="sk-rect"> <div class="rect1"></div> <div class="rect2"></div> <div class="rect3"></div> <div class="rect4"></div> <div class="rect5"></div> </div>',console.warn(i+" doesn't exist for HoldOn.js")}$('<div id="holdon-overlay" style="display: none;">\n                                    <div id="holdon-content-container">\n                                        <div id="holdon-content">'+e+'</div>\n                                        <div id="holdon-message">'+a+"</div>\n                                    </div>\n                                </div>").appendTo("body").fadeIn(300),t&&(t.backgroundColor&&$("#holdon-overlay").css("backgroundColor",t.backgroundColor),t.backgroundColor)&&$("#holdon-message").css("color",t.textColor)},close:function(){$("#holdon-overlay").fadeOut(300,function(){$(this).remove()})}};return t}())}(window),function(m,v){if(!m.fn.kropify){const X=(t,...i)=>"function"==typeof t&&t(...i);m("body").append('<div class="kropify-loader-mainbox" style="position: relative;"><div class="kropify-loaderOverlay"><div class="kropify-loaderInner"><div class="kropify-lds-ellipsis"><div></div><div></div><div></div><div></div></div></div></div></div>');var t=m("body").find(".kropify-modal-backdrop").length,i=m("body").find(".kropify-overlay").length,g=(0===t&&0===i&&m("body").append('<div class="kropify-modal-backdrop"></div><div class="kropify-overlay modal-blur"><div class="kropify-modal-dialog dialog-centered" role="document"><div class="kropify-modal-content"><div class="kropify-modal-header"><div class="kropify-modal-title"><div class="kropify-modal-title-img"></div><span class="kropify-modal-title-h5">KROPIFY</span></div><div class="btn-close"><span>+</span></div></div><div class="kropify-modal-body"><div class="kropify-image-box"><img src="" alt="" id="kropify-Image-id"></div></div><div class="kropify-modal-footer"><div class="kropify-options"><div class="jc-group"><div class="jc-group-inner"><span class="jc-rotate-left"><i></i></span><span class="jc-zoom-in"><i></i></span></div><div class="jc-group-inner"><span class="jc-rotate-right"><i></i></span><span class="jc-zoom-out"><i></i></span></div></div><div class="jc-group"><div class="jc-group-inner"><span class="jc-move-up"><i></i></span><span class="jc-move-left"><i></i></span></div><div class="jc-group-inner"><span class="jc-move-down"><i></i></span><span class="jc-move-right"><i></i></span></div></div><div class="jc-group only-two"><div class="jc-group-inner"><span data-value="1" class="jc-flip-horizontal"><i></i></span></div><div class="jc-group-inner"><span data-value="1" class="jc-flip-vertical"><i></i></span></div></div></div><div class="kropify-actions"><span class="jc-close-btn"><i></i> <jckropifybtn>Cancel</jckropifybtn></span><span class="jc-reset-btn"><i></i> <jckropifybtn>Reset</jckropifybtn></span><span class="jc-crop-btn"><i></i> <jckropifybtn>Crop</jckropifybtn></span></div></div></div></div></div>'),m("body").find(".kropify-modal-backdrop")),w=m("body").find(".kropify-overlay"),y=m(".kropify-modal-footer > .kropify-options").find("span.jc-rotate-left"),b=m(".kropify-modal-footer > .kropify-options").find("span.jc-rotate-right"),x=m(".kropify-modal-footer > .kropify-options").find("span.jc-zoom-in"),k=m(".kropify-modal-footer > .kropify-options").find("span.jc-zoom-out"),E=m(".kropify-modal-footer > .kropify-options").find("span.jc-move-up"),C=m(".kropify-modal-footer > .kropify-options").find("span.jc-move-down"),B=m(".kropify-modal-footer > .kropify-options").find("span.jc-move-left"),M=m(".kropify-modal-footer > .kropify-options").find("span.jc-move-right"),e=m(".kropify-modal-footer > .kropify-options").find("span.jc-flip-horizontal"),a=m(".kropify-modal-footer > .kropify-options").find("span.jc-flip-vertical"),D=m(".kropify-modal-footer > .kropify-actions").find("span.jc-close-btn"),A=m(".kropify-modal-footer > .kropify-actions").find("span.jc-reset-btn"),d=m(".kropify-modal-footer > .kropify-actions").find("span.jc-crop-btn"),U=m(".kropify-modal-header > div.btn-close");m("body").find("div.kropify-modal-backdrop"),m("body").find("div.kropify-overlay");const S=["jpg","png","jpeg"],c=["bounceIn","headShake","pulse","fadeIn"];var T,j,$,O,n,o,L,s,z,R=null,N="",H="image";function W(t,i){var e;return 0==t?"0 bytes":(i=i||2,e=Math.floor(Math.log(t)/Math.log(1024)),parseFloat((t/Math.pow(1024,e)).toFixed(i))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e])}function I(){m(e).attr("data-value",1),m(a).attr("data-value",1)}function r(t=!1){1==t&&m(".kropify-loaderOverlay").css({display:"flex"}),0==t&&m(".kropify-loaderOverlay").css({display:"none"})}function Y(t=!1){t&&HoldOn.open({theme:"sk-bounce",message:"Loading image..."}),HoldOn.close()}m.fn.kropify=function(f){$=f.viewMode&&""!=f.viewMode&&"undefined"!=f.viewMode?f.viewMode:1,o=!f.showLoader||""==f.showLoader||"undefined"==f.showLoader||f.showLoader,L=!f.showLoader||""==f.showLoader||"undefined"==f.showLoader||f.showLoader,O=f.aspectRatio&&""!=f.aspectRatio&&"undefined"!=f.aspectRatio?f.aspectRatio:1,f.cancelButtonText&&""!=f.cancelButtonText&&"undefined"!=f.cancelButtonText&&m(".kropify-modal-footer > .kropify-actions").find("span.jc-close-btn").find("jckropifybtn").html(f.cancelButtonText),f.resetButtonText&&""!=f.resetButtonText&&"undefined"!=f.resetButtonText&&m(".kropify-modal-footer > .kropify-actions").find("span.jc-reset-btn").find("jckropifybtn").html(f.resetButtonText),f.cropButtonText&&""!=f.cropButtonText&&"undefined"!=f.cropButtonText&&m(".kropify-modal-footer > .kropify-actions").find("span.jc-crop-btn").find("jckropifybtn").html(f.cropButtonText),go_ajaxURL=f.ajaxURL&&""!=f.ajaxURL&&"undefined"!=f.ajaxURL?f.ajaxURL:null,j=f.preview&&""!=f.preview&&"undefined"!=f.preview?f.preview:null,T=f.maxSize&&""!=f.maxSize&&"undefined"!=f.maxSize?f.maxSize:2097152,n=f.processURL&&""!=f.processURL&&"undefined"!=f.processURL?f.processURL:null,z=f.animationClass&&""!=f.animationClass&&"undefined"!=f.animationClass&&-1!=m.inArray(f.animationClass,c)?f.animationClass:"pulse",s=f.fileName&&""!=f.fileName&&"undefined"!=f.fileName?f.fileName:null,m(j).each(function(){"undefined"!==m(this).attr("data-kropify-default")&&m(this).attr("src",m(this).attr("data-kropify-default"))}),m(this).change(function(t){t.preventDefault();var t=t.target.files,i=m(this)[0].files[0];const e=m(this);R=e;var a=v.getElementById("kropify-Image-id"),n=(N=a,i.name.toLowerCase()),n=n.substring(n.lastIndexOf(".")+1),i=Math.round(i.size),o=m(this).attr("name");if(void 0!==o&&!1!==o&&(H=o),-1==m.inArray(n,S))return m(j).html(""),X(f.errors,"invalidFileType","Only (PNG, JPG, JPEG) file type allowed."),e.val(""),!1;if(T<i)return o="You select an image that has "+W(i)+" which excess to the required maximum size of "+W(T)+"., Please, select another one.",X(f.errors,"bigFileSize",o),m(j).html(""),e.val(""),!1;(reader=new FileReader).onloadstart=function(t){console.log("Start: "+t.type),L&&Y(!0)},reader.onload=function(t){a.src=t.target.result,m(".kropify-modal-content").addClass("animated "+z),cropper=new Cropper(a,{aspectRatio:O,viewMode:$}),setTimeout(function(){w.addClass("shown"),g.addClass("shown")},40)},reader.onerror=()=>{console.log("Oops, Something went wrong with the file reader.")},reader.readAsDataURL(t[0]),reader.onloadend=function(t){console.log("End: "+t.type),Y()},m(v).keyup(function(t){"Escape"===t.key&&(m("body").find("div.kropify-modal-dialog").find("div.kropify-image-box").find("img#kropify-Image-id").attr("src",""),w.removeClass("shown"),g.removeClass("shown"),e.val(""),cropper.destroy(),cropper=null,I())}),U.on("click",function(){m("body").find("div.kropify-modal-dialog").find("div.kropify-image-box").find("img#kropify-Image-id").attr("src",""),m(".kropify-modal-content").removeClass("animated "+z),w.removeClass("shown"),g.removeClass("shown"),e.val(""),cropper.destroy(),cropper=null,I()}),D.on("click",function(){m("body").find("div.kropify-modal-dialog").find("div.kropify-image-box").find("img#kropify-Image-id").attr("src",""),m(".kropify-modal-content").removeClass("animated "+z),w.removeClass("shown"),g.removeClass("shown"),e.val(""),cropper.destroy(),cropper=null,I()}),A.on("click",function(){cropper.reset(),I()}),y.on("click",function(){cropper.rotate(-1)});var s=0,r=(y.mousedown(function(){return clearTimeout(s),s=setInterval(function(){cropper.rotate(-1)},100),!1}),y.mouseup(function(){clearTimeout(s)}),b.on("click",function(){cropper.rotate(1)}),0),c=(b.mousedown(function(){return clearTimeout(r),r=setInterval(function(){cropper.rotate(1)},100),!1}),b.mouseup(function(){clearTimeout(r)}),x.on("click",function(){cropper.zoom(.1)}),0),d=(x.mousedown(function(){return clearTimeout(c),c=setInterval(function(){cropper.zoom(.1)},100),!1}),x.mouseup(function(){clearTimeout(c)}),k.on("click",function(){cropper.zoom(-.1)}),0),h=(k.mousedown(function(){return clearTimeout(d),d=setInterval(function(){cropper.zoom(-.1)},100),!1}),k.mouseup(function(){clearTimeout(d)}),E.on("click",function(){cropper.move(0,-2.5)}),0),l=(E.mousedown(function(){return clearTimeout(h),h=setInterval(function(){cropper.move(0,-2.5)},100),!1}),E.mouseup(function(){clearTimeout(h)}),C.on("click",function(){cropper.move(0,2.5)}),0),p=(C.mousedown(function(){return clearTimeout(l),l=setInterval(function(){cropper.move(0,2.5)},100),!1}),C.mouseup(function(){clearTimeout(l)}),B.on("click",function(){cropper.move(-2.5,0)}),0),u=(B.mousedown(function(){return clearTimeout(p),p=setInterval(function(){cropper.move(-2.5,0)},100),!1}),B.mouseup(function(){clearTimeout(p)}),M.on("click",function(){cropper.move(2.5,0)}),0);M.mousedown(function(){return clearTimeout(u),u=setInterval(function(){cropper.move(2.5,0)},100),!1}),M.mouseup(function(){clearTimeout(u)})}),e.on("click",function(){var t=m(this).attr("data-value"),t=(-1==parseInt(t)?m(this).attr("data-value",1):m(this).attr("data-value",-1),m(this).attr("data-value"));cropper.scaleX(t),m(this).attr("data-value",t)});var t=0,i=(e.mousedown(function(){return t=setInterval(function(){var t=m(this).attr("data-value"),t=(-1==parseInt(t)?m(this).attr("data-value",1):m(this).attr("data-value",-1),m(this).attr("data-value"));cropper.scaleX(t)},100),!1}),e.mouseup(function(){clearTimeout(t)}),a.on("click",function(){var t=m(this).attr("data-value"),t=(-1==parseInt(t)?m(this).attr("data-value",1):m(this).attr("data-value",-1),m(this).attr("data-value"));cropper.scaleY(t)}),0);a.mousedown(function(){return i=setInterval(function(){var t=m(this).attr("data-value"),t=(-1==parseInt(t)?m(this).attr("data-value",1):m(this).attr("data-value",-1),m(this).attr("data-value"));cropper.scaleY(t)},100),!1}),a.mouseup(function(){clearTimeout(i)}),d.on("click",function(){var i=cropper.getCroppedCanvas().toDataURL(),t=null!=s?s:H;if(null==n)return m(j).html(""),X(f.errors,"invalidProcessURL","Please, define process URL."),element.val(""),!1;var e=i.split(";"),a=e[0].split(":")[1],e=function(t,i,e){i=i||"",e=e||512;for(var a=atob(t),n=[],o=0;o<a.length;o+=e){for(var s=a.slice(o,o+e),r=new Array(s.length),c=0;c<s.length;c++)r[c]=s.charCodeAt(c);var d=new Uint8Array(r);n.push(d)}return new Blob(n,{type:i})}(e[1].split(",")[1],a),a=new FormData;a.append(t,e),m.ajax({headers:{"X-CSRF-TOKEN":m('meta[name="csrf-token"]').attr("content")},url:n,data:a,type:"POST",contentType:!1,processData:!1,cache:!1,dataType:"json",beforeSend:function(){o&&r(!0)},success:function(t){o&&r(!0),N.src="",I(),m(".kropify-modal-content").removeClass("animated "+z),g.removeClass("shown"),w.removeClass("shown"),R.val(""),cropper.destroy(),cropper=null,m(j).each(function(){m(this).attr("src",i)}),X(f.success,t)},complete:function(){r(!1)},error:function(t,i,e){}})})}}}($,(window,document)),function(n){function o(t,i,e,a,n,o){return['<div class="ui-'+t+" "+i+'">','<div class="box" '+(e?'style="width: '+e+'px"':"")+">",'<div class="close"></div>','<div class="hd">',a,"</div>",'<div class="bd">',n,"</div>",'<div class="ft">',o.map(function(t,i){return"<span>"+t+"</span>"}).join(""),"</div>","</div>","</div>"].join("")}n.modal=function(t){n.modal.hide();var e=n.extend({},{text:"",title:"Title",className:"",btns:["Okey","Cancel"],width:600,callback:null},t);n(o("modal",e.className,e.width,e.title,e.text,e.btns)).appendTo(document.body).on("click",".ft span",function(){var t=n(this).index(),i=e.btns.length;1===i?e.callback&&e.callback():t===i-1?n.modal.hide():e.callback&&e.callback(t)}).on("click",".close",n.modal.hide)},n.modal.hide=function(){n(".ui-modal").remove()},n.alert=function(t,i,e){n.alert.hide();var a={text:t,title:"Title"};n.isFunction(i)?a.callback=i:(a.title=i||"Title",a.callback=e),n(o("alert","","",a.title,a.text,["Okey"])).appendTo(document.body).on("click",".ft span",function(){n.alert.hide(),a.callback&&a.callback()}).on("click",".close",n.alert.hide)},n.alert.hide=function(){n(".ui-alert").remove()},n.toast=function(t,i){n.toast.hide();t=['<div class="ui-toast">','<div class="box">',i&&'<div class="icon-loading"></div>',"<div>",t,"</div>","</div>","</div>"].join("");n(t).appendTo(document.body),i||setTimeout(n.toast.hide,2e3)},n.toast.hide=function(){n(".ui-toast").remove()}}(jQuery);